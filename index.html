<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Encrypted Love</title>

<style>
body{
  margin:0;
  background:black;
  color:#00ffcc;
  font-family:monospace;
  text-align:center;
  overflow-x:hidden;
}

canvas{
  position:fixed;
  top:0;
  left:0;
  z-index:0;
}

/* Envelope Section */
#envelopeSection{
  margin-top:60px;
  text-align:center;
  display:none;
}

/* Hint Text */
#hintText{
  color:white;
  margin-bottom:10px;
  animation:blink 2s infinite;
}

@keyframes blink{
  0%,100%{opacity:1;}
  50%{opacity:0.5;}
}

/* Envelope Container */
#envelope{
  width:200px;
  height:130px;
  margin:0 auto;
  position:relative;
  cursor:pointer;
  animation:shake 2s infinite;
}

/* Shake animation */
@keyframes shake{
  0%,100%{transform:rotate(0deg);}
  25%{transform:rotate(1deg);}
  50%{transform:rotate(-1deg);}
  75%{transform:rotate(1deg);}
}

/* Envelope body */
#envelope .body{
  width:100%;
  height:100%;
  background:#ff4d6d;
  position:absolute;
  bottom:0;
  border-radius:5px;
}

/* Envelope flap */
#envelope .flap{
  width:100%;
  height:100%;
  background:#ff758f;
  position:absolute;
  top:0;
  clip-path:polygon(0 0, 100% 0, 50% 60%);
  transform-origin:top;
  transition:transform 0.8s ease;
  border-radius:5px;
  perspective: 1000px;
}

/* Paper inside */
#envelope .paper{
  width:90%;
  height:110%;
  background:white;
  position:absolute;
  bottom:10px;
  left:5%;
  border-radius:5px;
  padding:15px;
  box-sizing:border-box;
  transform:translateY(100%);
  transition:transform 1s ease;
  overflow-x:hidden;
}

/* When opened */
#envelope.open .flap{
  transform:rotateX(-120deg);
}


#envelope.open .paper{
  transform:translateY(-10%);
}

#letterText{
  color:black;
  font-size:14px;
}


#bgVideo{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  object-fit:cover;
  z-index:0;
  display:none;
}

#content{
  position:relative;
  z-index:2;
  margin-top:20%;
  padding:15px;
}

#passwordBox{display:none;margin-top:20px;}

input{
  padding:10px;
  background:black;
  border:1px solid #00ffcc;
  color:#00ffcc;
}

button{
  padding:10px;
  background:#00ffcc;
  border:none;
  cursor:pointer;
}

#main{display:none;color:white;}

#nameGlow{
  font-size:8vw;
  color:hotpink;
  text-shadow:0 0 20px hotpink;
}

#secret{
  display:none;
  color:gold;
  margin-top:15px;
  position:relative;
  z-index:5;
}


#slideshow{
  margin-top:20px;
  width:85%;
  max-width:350px;
  margin:auto;
  margin-bottom:40px;
}

#slideshow img{
  width:100%;
  border-radius:15px;
  opacity:0;
  transition:opacity 2s ease;
}

.heart{
  position:fixed;
  color:pink;
  font-size:24px;
  animation:floatUp 5s linear infinite;
  z-index:3;
  pointer-events:none;
}


@keyframes floatUp{
  from{transform:translateY(100vh);}
  to{transform:translateY(-10vh);}
}



</style>
</head>
<body>

<video id="bgVideo" loop playsinline>
  <source src="bgvideo.mp4" type="video/mp4">
</video>
<audio id="bgMusic" loop>
  <source src="bgmusic.mp3" type="audio/mpeg">
</audio>


<canvas id="matrix"></canvas>

<div id="content">
  <div id="terminal"></div>

  <div id="passwordBox">
    <p>Enter Password (Our First Hug):</p>
    <input type="password" id="passwordInput">
    <button onclick="checkPassword()">Unlock</button>
  </div>

  <div id="main">



    <div id="nameGlow">MASOOMA</div>
    <p id="messageText"></p>

    <div id="slideshow">
      <img id="slideImage" src="photo1.png">
    </div>

    <div id="secret">
      "You didn‚Äôt just unlock this page‚Ä¶  
      You unlocked my heart forever ‚ù§Ô∏è"
    </div>
<div id="envelopeSection">

  <div id="hintText">Only open if you love me‚Ä¶ üíñ</div>

  <div id="envelope" onclick="openEnvelope()">
      <div class="flap"></div>
      <div class="body"></div>
      <div class="paper">
          <div id="letterText"></div>
      </div>
  </div>

</div>

<!-- Paper sound -->
<audio id="paperSound">
  <source src="paper.wav" type="audio/WAV">
</audio>
  </div>
</div>

<script>

/* MATRIX */
const canvas=document.getElementById("matrix");
const ctx=canvas.getContext("2d");
canvas.height=window.innerHeight;
canvas.width=window.innerWidth;

const letters="01LOVE";
const fontSize=14;
const columns=Math.floor(canvas.width/fontSize);
const drops=Array(columns).fill(1);

function draw(){
  ctx.fillStyle="rgba(0,0,0,0.05)";
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#00ffcc";
  ctx.font=fontSize+"px monospace";
  for(let i=0;i<drops.length;i++){
    const text=letters[Math.floor(Math.random()*letters.length)];
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize>canvas.height && Math.random()>0.975){
      drops[i]=0;
    }
    drops[i]++;
  }
}
let matrixInterval=setInterval(draw,33);

/* TERMINAL TEXT */
let lines=[
"Initializing secure love protocol...",
"Decrypting hidden emotions...",
"Soulmate found.",
"Authentication required."
];

let lineIndex=0;
function typeLines(){
  if(lineIndex<lines.length){
    document.getElementById("terminal").innerHTML+=lines[lineIndex]+"<br>";
    lineIndex++;
    setTimeout(typeLines,800);
  }else{
    document.getElementById("passwordBox").style.display="block";
  }
}
typeLines();

/* LOVE MESSAGE */
let loveMessage="Out of 8 billion people in this world‚Ä¶ I would still choose you.";

/* PASSWORD */
function checkPassword(){
  let correct="05122023";
  let entered=document.getElementById("passwordInput").value;

  if(entered===correct){

    clearInterval(matrixInterval);
    canvas.style.display="none";

    document.getElementById("terminal").style.display="none";
    document.getElementById("passwordBox").style.display="none";
    document.getElementById("main").style.display="block";

    let video=document.getElementById("bgVideo");
    video.style.display="block";
    video.play();
    document.getElementById("bgMusic").play();

    typeMessage();
    speakMessage();
    startSlideshow();
    createHearts();

   setTimeout(function(){

  // Show secret message
  var secretElement = document.getElementById("secret");
  if(secretElement){
      secretElement.style.display = "block";
  }

  // Show envelope after secret
  document.getElementById("envelopeSection").style.display="block";

}, 10000);



  }else{
    alert("Wrong password.");
  }
}

/* TYPE EFFECT */
function typeMessage(){
  let i=0;
  function type(){
    if(i<loveMessage.length){
      document.getElementById("messageText").innerHTML+=loveMessage.charAt(i);
      i++;
      setTimeout(type,60);
    }
  }
  type();
}

/* AI VOICE */
function speakMessage(){

  const msg = new SpeechSynthesisUtterance(loveMessage);

  function setVoice(){
    const voices = speechSynthesis.getVoices();

    let selectedVoice = null;

    // First preference: Indian English male voice
    for(let i=0; i<voices.length; i++){
      if(
        voices[i].lang.includes("en-IN") &&
        voices[i].name.toLowerCase().includes("male")
      ){
        selectedVoice = voices[i];
        break;
      }
    }

    // Second preference: Any Indian English voice
    if(!selectedVoice){
      for(let i=0; i<voices.length; i++){
        if(voices[i].lang.includes("en-IN")){
          selectedVoice = voices[i];
          break;
        }
      }
    }

    // Fallback: Any English voice
    if(!selectedVoice){
      for(let i=0; i<voices.length; i++){
        if(voices[i].lang.includes("en")){
          selectedVoice = voices[i];
          break;
        }
      }
    }

    msg.voice = selectedVoice;
    msg.rate = 0.9;
    msg.pitch = 0.8; // lower pitch = deeper voice feel
    speechSynthesis.speak(msg);
  }

  // Some browsers load voices asynchronously
  if(speechSynthesis.getVoices().length === 0){
    speechSynthesis.onvoiceschanged = setVoice;
  } else {
    setVoice();
  }
}


/* SLIDESHOW */
let photos=["photo1.png","photo2.png","photo3.png"];
let current=0;

function startSlideshow(){
  let img=document.getElementById("slideImage");
  img.style.opacity=1;

  setInterval(()=>{
    current=(current+1)%photos.length;
    img.style.opacity=0;
    setTimeout(()=>{
      img.src=photos[current];
      img.style.opacity=1;
    },1000);
  },4000);
}

/* HEARTS */
function createHearts(){
  setInterval(()=>{
    let heart=document.createElement("div");
    heart.className="heart";
    heart.innerHTML="&#10084;&#65039;";

    heart.style.left=Math.random()*100+"vw";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(),5000);
  },300);
}
let fullLetter = 
  "My love,\n\n" +
"Every heartbeat of mine whispers your name.\n\n" +
 "Every line of code in this page was written with you in my heart.\n\n"+  
  "You are not just someone special‚Ä¶\n\n"+  
      "You are my favorite notification in life.\n\n"+
      "Forever yours‚ù§Ô∏è";

function openEnvelope(){

  let envelope = document.getElementById("envelope");
  let sound = document.getElementById("paperSound");

  envelope.classList.add("open");

  // Stop shaking
  envelope.style.animation = "none";

  // Play paper sound
  sound.play();

  // Start typing letter
  typeLetter();
}

function typeLetter(){
  let i=0;
  let speed=40;
  let target = document.getElementById("letterText");
  target.innerHTML="";

  function type(){
    if(i < fullLetter.length){
      target.innerHTML += fullLetter.charAt(i) === "\n" ? "<br>" : fullLetter.charAt(i);
      i++;
      setTimeout(type, speed);
    }
  }

  setTimeout(type,800); // wait for paper slide
}

</script>

</body>
</html>
